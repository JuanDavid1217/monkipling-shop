"use strict";(self["webpackChunkMonkipling_Shop"]=self["webpackChunkMonkipling_Shop"]||[]).push([[142],{1142:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});a(4114);var r=a(6768),s=a(4232),i=a(5130);const n={class:"content"},o={class:"header-content"},c={class:"title"},l={class:"order-wrapper"},d=["value"],u={key:0},h={key:1,class:"error"},p={key:2,class:"product-list"},g={class:"img-box"},m=["src"],v={class:"product-info"},k={class:"product-name"},b={class:"product-price"},C=["onClick"];function S(e,t,a,S,y,_){const f=(0,r.g2)("SidebarFilters"),P=(0,r.g2)("ProductPaginator");return(0,r.uX)(),(0,r.CE)("main",{class:(0,s.C4)(["products-container",{"filters-open":y.showSidebar}])},[(0,r.Lk)("button",{class:"toggle-filters-btn",onClick:t[0]||(t[0]=(...e)=>_.toggleSidebar&&_.toggleSidebar(...e))},(0,s.v_)(y.showSidebar?"Cerrar Filtros":"Abrir Filtros"),1),(0,r.bo)((0,r.bF)(f,{metadata:y.metadata,activeFilters:e.$route.query,currentOrder:_.currentOrder,search:y.search,onUpdateSearch:_.updateSearch,onSubmitSearch:_.submitSearch,onFilterChanged:_.handleSidebarFilterChange,onOrderChanged:_.updateOrder,onClearFilters:_.handleClearFilters,class:"responsive-sidebar"},null,8,["metadata","activeFilters","currentOrder","search","onUpdateSearch","onSubmitSearch","onFilterChanged","onOrderChanged","onClearFilters"]),[[i.aG,y.showSidebar]]),(0,r.Lk)("section",n,[(0,r.Lk)("div",o,[(0,r.Lk)("h1",c,"Resultados ("+(0,s.v_)(y.metadata?.total_products||0)+")",1),(0,r.Lk)("div",l,[t[3]||(t[3]=(0,r.Lk)("label",null,"Ordenar Por:",-1)),(0,r.Lk)("select",{value:_.currentOrder,onChange:t[1]||(t[1]=e=>_.updateOrder(e.target.value))},[...t[2]||(t[2]=[(0,r.Lk)("option",{value:"min_price"},"Precio: Menor a Mayor",-1),(0,r.Lk)("option",{value:"max_price"},"Precio: Mayor a Menor",-1)])],40,d)])]),y.loading?((0,r.uX)(),(0,r.CE)("div",u,"Cargando productos...")):y.error?((0,r.uX)(),(0,r.CE)("div",h,(0,s.v_)(y.error),1)):((0,r.uX)(),(0,r.CE)("div",p,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(y.products,t=>((0,r.uX)(),(0,r.CE)("div",{key:t.id,class:"product-card"},[(0,r.Lk)("div",g,[(0,r.Lk)("img",{src:t.url[0],alt:"Product Image"},null,8,m)]),(0,r.Lk)("div",v,[(0,r.Lk)("span",k,(0,s.v_)(t.name),1),(0,r.Lk)("span",b,"$"+(0,s.v_)(t.price),1),(0,r.Lk)("button",{class:"btn",onClick:a=>e.$router.push(`/product/${t.id}`)},"Ver Detalles",8,C)])]))),128))])),!y.loading&&!y.error&&y.metadata?.total_pages>1?((0,r.uX)(),(0,r.Wv)(P,{key:3,currentPage:y.metadata?.current_page,totalPages:y.metadata?.total_pages,previousPage:y.metadata?.previous_page,nextPage:y.metadata?.next_page,onPageChanged:_.updatePage},null,8,["currentPage","totalPages","previousPage","nextPage","onPageChanged"])):(0,r.Q3)("",!0)])],2)}var y=a(2032);const _={class:"sidebar"},f={class:"header-filters"},P=["onClick"],L={class:"toggle-icon"},F={key:0,class:"items-list"},$={key:0},w={class:"price-range-info"},E={key:1},X=["checked","onChange"],O={class:"item-count"};function x(e,t,a,i,n,o){const c=(0,r.g2)("SearchComponent");return(0,r.uX)(),(0,r.CE)("aside",_,[(0,r.Lk)("div",f,[t[3]||(t[3]=(0,r.Lk)("h2",null,"Filtros",-1)),o.hasActiveFilters?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>o.clearFilters&&o.clearFilters(...e)),class:"clear-btn"},"Limpiar Todo")):(0,r.Q3)("",!0)]),(0,r.bF)(c,{search:a.search,onUpdateSearch:t[1]||(t[1]=t=>e.$emit("update-search",t)),onSubmitSearch:t[2]||(t[2]=t=>e.$emit("submit-search",t))},null,8,["search"]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.sections,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"filter-section"},[(0,r.Lk)("h3",{onClick:t=>o.toggleSection(e.id),class:(0,s.C4)({active:n.openSections.includes(e.id)})},[(0,r.eW)((0,s.v_)(e.section_name)+" ",1),(0,r.Lk)("span",L,(0,s.v_)(n.openSections.includes(e.id)?"−":"+"),1)],10,P),n.openSections.includes(e.id)?((0,r.uX)(),(0,r.CE)("div",F,["price"===e.id?((0,r.uX)(),(0,r.CE)("div",$,[(0,r.Lk)("div",w,[(0,r.Lk)("span",null,"Min: $"+(0,s.v_)(e.items?.[0]?.total),1),(0,r.Lk)("span",null,"Max: $"+(0,s.v_)(e.items?.[1]?.total),1)])])):((0,r.uX)(),(0,r.CE)("div",E,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.items,t=>((0,r.uX)(),(0,r.CE)("label",{key:t.item_name,class:"checkbox-label"},[(0,r.Lk)("input",{type:"checkbox",checked:o.isFilterApplied(e.id,t.item_name),onChange:a=>o.handleFilterChange(e.id,t.item_name,a.target.checked)},null,40,X),(0,r.eW)(" "+(0,s.v_)("boolean"===typeof t.item_name?t.item_name?"Sí":"No":t.item_name)+" ",1),(0,r.Lk)("span",O,"("+(0,s.v_)(t.total)+")",1)]))),128))]))])):(0,r.Q3)("",!0)]))),128))])}a(8111),a(2489);const A={class:"search-container"},M=["value"];function q(e,t,a,s,n,o){return(0,r.uX)(),(0,r.CE)("div",A,[(0,r.Lk)("input",{type:"text",placeholder:"Buscar...",class:"search-input",value:a.search,onInput:t[0]||(t[0]=t=>e.$emit("update-search",t.target.value?.trim())),onKeyup:t[1]||(t[1]=(0,i.jR)(t=>e.$emit("submit-search"),["enter"]))},null,40,M),(0,r.Lk)("div",{class:"search-button",onClick:t[2]||(t[2]=t=>e.$emit("submit-search"))},[...t[3]||(t[3]=[(0,r.Lk)("i",{class:"bi bi-search search-ico"},null,-1)])])])}var I={name:"SearchComponent",props:{search:{type:String,default:""}}},Q=a(1241);const N=(0,Q.A)(I,[["render",q],["__scopeId","data-v-7617218f"]]);var R=N,D={name:"SidebarFilters",props:{metadata:{type:Object,default:()=>({sections:[]})},activeFilters:{type:Object,default:()=>({})},currentOrder:{type:String,default:"min_price"},search:{type:String,default:""}},data(){return{openSections:["category","gender","price","order","authenticity","discount"]}},components:{SearchComponent:R},computed:{sections(){return this.metadata?.sections.filter(e=>e.items.length>0)||[]},hasActiveFilters(){const e={...this.activeFilters};return delete e.order,delete e.page,Object.keys(e).length>0}},methods:{toggleSection(e){const t=this.openSections.indexOf(e);t>-1?this.openSections.splice(t,1):this.openSections.push(e)},isFilterApplied(e,t){const a=this.activeFilters[e],r=null!=a?String(a).toLowerCase():null,s=null!=t?String(t).toLowerCase():null;return r===s},handleFilterChange(e,t,a){this.$emit("filter-changed",{key:e,value:a?t:void 0})},handleOrderChange(e){this.$emit("order-changed",e)},clearFilters(){this.$emit("clear-filters")}}};const j=(0,Q.A)(D,[["render",x],["__scopeId","data-v-73337254"]]);var K=j;const U={key:0,class:"paginator-nav"},W=["disabled"],V={class:"page-info"},B=["disabled"];function G(e,t,a,i,n,o){return a.totalPages>1?((0,r.uX)(),(0,r.CE)("div",U,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>o.changePage(a.previousPage)),disabled:!a.previousPage,class:"nav-button"}," Anterior ",8,W),(0,r.Lk)("span",V," Página "+(0,s.v_)(a.currentPage)+" de "+(0,s.v_)(a.totalPages),1),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>o.changePage(a.nextPage)),disabled:!a.nextPage,class:"nav-button"}," Siguiente ",8,B)])):(0,r.Q3)("",!0)}var T={name:"ProductPaginator",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},previousPage:{type:Number,default:null},nextPage:{type:Number,default:null}},methods:{changePage(e){e&&this.$emit("page-changed",e)}}};const z=(0,Q.A)(T,[["render",G],["__scopeId","data-v-24f0a7ee"]]);var H=z,J={name:"ProductsView",components:{SidebarFilters:K,ProductPaginator:H},data(){return{products:[],metadata:null,loading:!0,error:null,search:"",showSidebar:!0}},computed:{currentOrder(){return this.$route.query.order||"min_price"}},methods:{fetchData(){this.loading=!0,this.error=null,this.search=this.$route.params.search;const e={search:this.search,filters:this.$route.query};try{const t=(0,y.U)(e);this.products=t.data,this.metadata=t.metadata}catch(t){console.error("Error fetching products:",t),this.error="No se pudieron cargar los productos."}finally{this.loading=!1}},updateSearch(e){this.search=e},submitSearch(){this.search&&this.$router.push({name:this.$route.name,params:{search:this.search}})},updateOrder(e){this.updateRouteQuery({order:e,page:void 0})},updatePage(e){e&&this.updateRouteQuery({page:e})},handleSidebarFilterChange({key:e,value:t}){this.updateRouteQuery({[e]:t,page:void 0})},updateRouteQuery(e){this.$router.push({name:this.$route.name,params:this.$route.params,query:{...this.$route.query,...e}}).catch(e=>{if("NavigationDuplicated"!==e.name)throw e})},handleClearFilters(){this.$router.push({name:this.$route.name,params:this.$route.params,query:{}})},toggleSidebar(){this.showSidebar=!this.showSidebar}},mounted(){this.fetchData(),this.showSidebar=window.matchMedia("(min-width: 576px)").matches,window.matchMedia("(min-width: 576px)").addEventListener("change",e=>{this.showSidebar=e.matches})},watch:{"$route.query":{handler(){this.fetchData()},deep:!0}}};const Y=(0,Q.A)(J,[["render",S],["__scopeId","data-v-714f5752"]]);var Z=Y}}]);
//# sourceMappingURL=142.abf56531.js.map